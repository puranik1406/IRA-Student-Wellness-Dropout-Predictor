{% extends "base.html" %}

{% block title %}Log Mood - IRA{% endblock %}

{% block content %}
<div class="bg-light min-vh-100 py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6">
                <div class="card border-0 shadow-lg">
                    <div class="card-body p-5">
                        <div class="text-center mb-4">
                            <i class="bi bi-emoji-smile text-primary" style="font-size: 3rem;"></i>
                            <h2 class="mt-3 mb-2">How are you feeling today?</h2>
                            <p class="text-muted">Track your mood to help us support you better</p>
                        </div>

                        <form method="POST" action="{{ url_for('mood') }}">
                            <div class="mb-4">
                                <label class="form-label fw-bold">Select Your Mood (1-10)</label>
                                <div class="d-flex justify-content-between mb-2">
                                    <small class="text-muted">Very Low</small>
                                    <small class="text-muted">Excellent</small>
                                </div>
                                <input type="range" class="form-range" id="moodScore"
                                       name="mood_score"
                                       min="1" max="10" value="7" required>
                                <div class="text-center mt-3">
                                    <div id="moodDisplay" class="display-1">ğŸ˜Š</div>
                                    <h3 class="mt-2" id="moodValue">7</h3>
                                </div>
                            </div>

                            <div class="mb-4">
                                <label for="notes" class="form-label fw-bold">Notes
                                    (Optional)</label>
                                <textarea class="form-control" id="notes" name="notes" rows="4"
                                          placeholder="What's on your mind today?"></textarea>
                            </div>

                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="bi bi-check-circle"></i> Save Mood
                                </button>
                                <a href="{{ url_for('student_dashboard', id=session['user_id']) }}"
                                   class="btn btn-outline-secondary">
                                    <i class="bi bi-arrow-left"></i> Back to Dashboard
                                </a>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="card border-0 shadow-sm mt-4">
                    <div class="card-body">
                        <h6 class="mb-3"><i class="bi bi-info-circle"></i> Why track your mood?</h6>
                        <ul class="small mb-0">
                            <li>Helps identify patterns in your emotional wellbeing</li>
                            <li>Enables counselors to provide better support</li>
                            <li>Contributes to early detection of potential issues</li>
                            <li>Your data is confidential and secure</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>

const moodEmojis = {
    1: 'ï¿½ï¿½ï¿½', 2: 'ğŸ˜Ÿ', 3: 'ğŸ˜•', 4: 'ğŸ˜', 5: 'ğŸ™‚',
    6: 'ğŸ˜Š', 7: 'ğŸ˜„', 8: 'ğŸ˜ƒ', 9: 'ğŸ¤©', 10: 'ğŸ¥³'
};

const moodSlider = document.getElementById('moodScore');
const moodDisplay = document.getElementById('moodDisplay');
const moodValue = document.getElementById('moodValue');

moodSlider.addEventListener('input', function() {
    const value = this.value;
    moodValue.textContent = value;
    moodDisplay.textContent = moodEmojis[value];
});
</script>
{% endblock %}
